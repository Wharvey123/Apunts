# Atacs. Cicle de cinc fases

1: Reconeixement
=======================
Objectiu: Recopilació d'informació sobre el sistema objectiu.

Tècniques:
-----------
- Enginyeria social o trashing per aconseguir informació valuosa.
- Recerques a Internet.
- Capturar trànsit de xarxa (sniffing).
- Ús de l'ordre whois per obtenir dades del sistema.

Recursos: Whois.com, ICANN Whois.

2: Exploració
===================
Objectiu: Sondar el sistema per detectar vulnerabilitats explotables.

Accions:
--------
- Recopilar informació sobre comptes d'usuari, versions de sistemes operatius, aplicacions, i ports oberts.
- Utilització d'escàners de xarxa o de ports com nmap.
- Ordres com tracert (Windows) o traceroute (Linux/Unix) per rastrejar canvis de xarxa.

3: Accés
===============
Objectiu: Explotar vulnerabilitats per accedir al sistema.

Tècniques de Crackeig de Contrasenyes:
---------------------------------------
- Online: Tests en viu amb eines com Hydra.
- Offline: Extracció i anàlisi de contrasenyes encriptades, amb eines com Cain i Abel.

Evasió:
-------
- Evasió de Firewalls, IDS, IPS, i Honeypots.
- Eines: 007 Shell, ICMP Shell, AckCmd.

4: Manteniment de l'Accés
===============================
Objectiu: Preservar l'accés futur al sistema.

Mètodes:
---------
- Instal·lació de malware com cavalls de Troia i rootkits.

Accions:
---------
- Keylogging, captura de trànsit (sniffing), instal·lació de FTP il·lícits.
- Uso de Rootkits a nivells de Kernel, Llibreries, i Aplicacions.

5: Esborrat d'Empremtes
=============================
Objectiu: Ocultar l'activitat maliciosa i evitar detecció.

Pasos:
------
- Desactivar Auditoria del sistema si està activa.
- Eliminar registres (logs) del sistema i aplicacions compromeses.
- Eliminar evidència d'eines utilitzades mitjançant esteganografia.

# **SERVEI DNS**

*Format missatge DNS*: Els missatges DNS segueixen un format específic amb camps com ID, flags, i tipus de consulta o resposta.

*Saber on es dóna la vulnerabilitat i en què consisteix*: Les vulnerabilitats poden presentar-se en diverses àrees, com ara IP Spoofing, DNS Caché Poisoning, DoS, Man in the Middle, DNS tunneling, i DoS DNS amplification attack.

*Transaccions més comuns*:
   - Consultes/respostes.
   - Transferències de zona.
   - Actualitzacions dinàmiques.
   - Notificacions.

*Atacs i funcionament dels mateixos*:
   - IP Spoofing.
   - DNS Caché Poisoning.
   - DoS.
   - Man in the Middle.
   - DNS tunneling.
   - DoS DNS amplification attack.

*Capes servei DNS. Assegurament*:
   - Entorn base.
   - S.O.
   - Software Bind.
   - Topologia de xarxa.
   - Dades.
   - Parametritzacions.
   - Info registres de zona.
   - Transaccions.
   - Queries (Consultes/Respostes).
   - Transferències de zona.
   - Notificacions.
   - Actualitzacions dinàmiques.

*Assegurament del servei DNS*:
   - Contramesures als atacs.
   - DNSSEC (explicació i funcionament).
        DNSSEC és una extensió de seguretat per al sistema de noms de domini (DNS). L'objectiu principal de DNSSEC és garantir la integritat i autenticitat de la informació del DNS, protegint contra atacs com la           suplantació d'identitat i la modificació de dades.
           - Signatura de Zones
           - Clau Pública i Privada
           - Inclusió de Signatures a la Zona DNS
           - Cadena de Confiança
   - Xifratge DNS (DNS over TLS i DNS over HTTPS). Ports usats: 853/443 (53 UDP).
        DNS over TLS (DoT):
           DNS over TLS (DoT) és un protocol que utilitza el Transport Layer Security (TLS) per xifrar les comunicacions entre el client DNS i el servidor DNS. Les consultes es realitzen pel port 853, millorant la             privacitat i seguretat del DNS.
        DNS over HTTPS (DoH):
           DNS over HTTPS (DoH) utilitza el protocol HTTPS per xifrar les consultes DNS i respostes, integrant-les amb el tràfic HTTPS normal pel port 443. Aquest protocol millora la privacitat i és fàcil                     d'integrar amb HTTPS, facilitant la implementació en navegadors i altres aplicacions.

# **SERVEI FTP**

*Saber on es dóna la vulnerabilitat i en què consisteix*: Les vulnerabilitats poden existir en:
   - Software server no actualitzat.
   - Software server mal configurat.
   - Molts admins.
   - Protocols o xifratge ja vulnerats.
   - Entorn difícil d’administrar.
   - Falta d’alertes o pistes per auditoria (LOGS).

*Atacs*:
   - Per força bruta.
   - Rebot FTP.
   - Robatori de ports.
   - Attack Spoofing.
   - DoS - DDoS.

*Vulnerabilitats*:
   - Software server no actualitzat.
   - Software server mal configurat.
   - Molts admins.
   - Protocols o xifratge ja vulnerats.
   - Entorn difícil d’administrar.
   - Falta d’alertes o pistes per auditoria (LOGS).

*Mesures a prendre per assegurar el servei FTP*:
   - Deshabilitar estàndard FTP. Alternatives (FTPS, SFTP).
   - Encriptació i hasos robustos.
   - Instal·lar servidor darrera Gateway.
   - Llistes blanques i llistes negres d’IPs.
   - Assegurar servidor FTPS (Mode explícit, mode implícit, TLS 1.2, Certificats SSL).
   - Gestió administració del compte (Separar credencials, deshabilitar usuari anonym, política de contrasenyes robusta, etc.).

# **SERVEI CORREU ELECTRÒNIC**

*Principals atacs*:
   - Phishing vs Spoofing.

*Protocol SPF, DKIM i Estàndard DMARC*:
   - Funcionament de cada protocol.

*Mesures a prendre*:
   - Comprendre els atacs de Phishing i Spoofing.
   - Utilitzar xifratge OpenPGP amb clau pública/privada.

# **SERVEI WEB**

*Saber on es dóna la vulnerabilitat i en què consisteix*: Les vulnerabilitats poden existir en:
   - Divulgació WSDL.
   - Bomba XML.
   - Injecció XPath.
   - Injecció XML.

*Arquitectura servei web*:
   - Proveïdor serveis (Service Provider).
   - Qui publica (Service Broker).
   - Qui demana el servei (Service Requester).
   - Fitxer WSDL.
   - Protocol SOAP.
   - UDDI.

*Tipus d’atacs o vulnerabilitats*:
   - Divulgació WSDL.
   - Bomba XML.
   - Injecció XPath.
   - Injecció XML.

*Contramesures*:
   - Contramesures específiques per a cada tipus d'atac o vulnerabilitat.

# **SERVEI VoIP**

*En què consisteix*:
   - Descripció general del servei VoIP.

*Inconvenients i avantatges*:
   - Comparació amb la telefonia convencional.

*Elements que hi participen*:
   - Terminals.
   - Gateways.
   - Gatekeepers.
   - Protocol RTP i RTCP.
   - Protocol H323.
   - Protocol SIP.
   - Tipus servidors.

*Vulnerabilitats i atacs*:
   - Accessos desautoritzats i fraus.
   - Vulnerabilitats de la xarxa subjacent.
   - Atacs de denegació de servei.
   - Atacs als dispositius.
   - Enumeració i descobriment.
   - Atacs a nivell d'aplicació.
   - Autenticació en VoIP.
   - Manipulació senyalització.
   - Suplantació identitat.
   - Desregistrar usuaris.
   - Desconnexió usuaris.
   - Redirecció trucades.
   - Manipulació transmissió.
   - Eavesdropping.
   - Inserció àudio.
   - Fuzzing.
   - DoS.

*Assegurament del servei VoIP*:
   - TLS.
   - VPNs.
   - Protocol SRTP.
   - VLANs.
   - Limitar accés a la xarxa VoIP.
   - Limitar volum de dades.
